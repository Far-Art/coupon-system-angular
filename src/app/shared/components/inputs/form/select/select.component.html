<div class="fa-combobox-container drop-shadow-low rounded-3 input-group has-validation mt-2 mb-2" (click)="onOpen()" [ngClass]="{'open': isOpen}">
  <span style="min-width: 42px" class="d-flex justify-content-center input-group-text p-0 rounded-end-0">
    <!-- PROVIDED ICON -->
    <div csCheckNgContent #content>
      <ng-content></ng-content>
    </div>
    <!-- DEFAULT ICON -->
    <div *ngIf="!hasContent">
      <svg fill="currentColor" height="16" width="16" xmlns="http://www.w3.org/2000/svg"
           viewBox="0 0 450 450">
        <g>
          <g><path d="M40.003,69.679C17.914,69.679,0,87.592,0,109.697c0,22.089,17.914,39.987,40.003,39.987
                  c22.089,0,40.003-17.898,40.003-39.987C80.006,87.592,62.092,69.679,40.003,69.679z"></path></g>
          <g><path d="M40.003,190.032C17.914,190.032,0,207.93,0,230.035c0,22.089,17.914,40.002,40.003,40.002
                  c22.089,0,40.003-17.913,40.003-40.002C80.006,207.93,62.092,190.032,40.003,190.032z"></path></g>
          <g><path d="M40.003,310.37C17.914,310.37,0,328.283,0,350.372c0,22.089,17.914,40.003,40.003,40.003
                  c22.089,0,40.003-17.914,40.003-40.003C80.006,328.283,62.092,310.37,40.003,310.37z"></path></g>
          <g><path d="M429.973,79.601H145.419c-16.611,0-30.081,13.47-30.081,30.096c0,16.612,13.469,30.081,30.081,30.081h284.554
                  c16.61,0,30.081-13.469,30.081-30.081C460.054,93.071,446.583,79.601,429.973,79.601z"></path></g>
          <g><path d="M429.973,199.939H145.419c-16.611,0-30.081,13.469-30.081,30.096c0,16.612,13.469,30.081,30.081,30.081h284.554
                  c16.61,0,30.081-13.469,30.081-30.081C460.054,213.408,446.583,199.939,429.973,199.939z"></path></g>
          <g><path d="M429.973,320.291H145.419c-16.611,0-30.081,13.469-30.081,30.081c0,16.611,13.469,30.08,30.081,30.08h284.554
                  c16.61,0,30.081-13.469,30.081-30.08C460.054,333.759,446.583,320.291,429.973,320.291z"></path></g>
        </g>
      </svg>
    </div>
  </span>
  <div class="form-floating position-relative fa-combobox" [attr.aria-label]="label + ' select'"
       role="combobox"
       [attr.tabindex]="disabled ? -1 : 0"
       [ngClass]="{'is-valid': isRequired && isValid, 'is-invalid': isRequired && isTouched && !isValid, 'open': isOpen}">
    <span class="fa-combobox-arrows">
      <svg fill="currentColor" viewBox="0 -15 20 40" xmlns="http://www.w3.org/2000/svg"><path d="m12 6.586-8.707 8.707 1.414 1.414L12 9.414l7.293 7.293 1.414-1.414L12 6.586z" /></svg>
      <svg fill="currentColor" viewBox="0 0 20 40" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.414 3.293 8.707l1.414-1.414L12 14.586l7.293-7.293 1.414 1.414L12 17.414z" /></svg>
    </span>

    <!-- selected option -->
    <div [id]="id" class="fa-option-selected form-control" *ngIf="selected?.templateRef && !isOpen">
      <ng-container *ngTemplateOutlet="selected.templateRef"></ng-container>
    </div>
    <label [for]="id">{{ label | titlecase }}</label>

    <!-- displayed values from placeholder content -->
    <div *ngIf="isOpen" class="fa-options-container">
      <div class="fa-option"
           [ngClass]="{'active': i === selectedIndex}"
           (click)="onOptionSelect(i)"
           *ngFor="let option of _options; let i = index"
           role="option"
           [attr.aria-selected]="i === selectedIndex">
        <ng-container *ngTemplateOutlet="option.templateRef"></ng-container>
      </div>
    </div>

    <!-- placeholder for content -->
    <div inert aria-hidden="true" *ngIf="isOpen" style="display: none">
      <ng-content select="cs-option"></ng-content>
    </div>

    <!-- empty option template -->
    <cs-option inert aria-hidden="true" style="display: none" *ngIf="showEmptyOption" [value]="null">Select {{ label }}</cs-option>
  </div>
</div>